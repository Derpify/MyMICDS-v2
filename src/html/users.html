<!DOCTYPE html>
<html>
	<head>
		<title>MyMICDS - Home</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
	</head>
	<body>

		<form class="form-inline col-md-12" action="/user/get-info">
			<button class="btn btn-info">Get Info about user</button>
		</form>
        
        <form class="form-inline col-md-12" action="/user/grade-range">
			<button class="btn btn-info">Get Grade range</button>
		</form>

		<form class="form-inline col-md-12" action="/user/change-info">
			<h3>Change Info</h3>
			<input class="form-control" name="first-name" placeholder="First Name">
			<input class="form-control" name="last-name" placeholder="Last Name">
			<input class="form-control" name="grad-year" placeholder="Graduation Year">

			<div class="checkbox">
				<label>
					<input type="checkbox" name="teacher">
					I am a Teacher
				</label>
			</div>

			<button class="btn btn-info">Save</button>
		</form>

        <form class="form-inline col-md-12" action="/user/get-background">
            <h3>Get Background</h3>
            <button class="btn btn-info">Get Background</button>
        </form>

		<form class="upload-background col-md-12" action="/user/change-background">
			<h3>Change Background</h3>
			<label>
				<input type="file" name="background">
			</label>
			<button class="btn btn-info">Upload</button>
		</form>

		<form class="form-inline col-md-12" action="/user/change-password">
			<h3>Change Password</h3>
			<input type="password" class="form-control" name="old-password" placeholder="Old Password">
			<input type="password" class="form-control" name="new-password" placeholder="New Password">
			<button class="btn btn-info">Change Password</button>
		</form>

		<form class="form-inline col-md-12" action="/user/forgot-password">
			<h3>Forgot Password?</h3>
			<div class="form-group">
				<div class="input-group">
					<input class="form-control" name="user" placeholder="Username">
					<div class="input-group-addon">@micds.org</div>
				</div>
			</div>
			<button class="btn btn-success">Send me an email!</button>
		</form>

		<form class="form-inline col-md-12" action="/user/reset-password">
			<h3>Change Password with Hash</h3>
			<div class="form-group">
				<div class="input-group">
					<input class="form-control" name="user" placeholder="Username">
					<div class="input-group-addon">@micds.org</div>
				</div>
			</div>
			<input type="password" class="form-control" name="password" placeholder="New Password">
			<input class="form-control" name="hash" placeholder="Hash">
			<button class="btn btn-info">Change Password</button>
		</form>

		<form class="form-inline col-md-12" action="user/school-ends">
			<button class="btn btn-info">When does school end?</button>
		</form>

		<form class="form-inline col-md-12" action="/user/grad-year-to-grade">
			<h3>Graduation Year to Grade Converter</h3>
			<input class="form-control" name="year">
			<button class="btn btn-info">Convert</button>
		</form>

		<button class="test-converter btn btn-info">Test All Grades</button>
		<ul class="test-grades list-group"></ul>

		<form class="form-inline col-md-12" action="/user/grade-to-grad-year">
			<h3>Grade to Graduation Year Converter</h3>
			<input class="form-control" name="grade">
			<button class="btn btn-info">Convert</button>
		</form>

		<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

		<script>
            var formData = {};
			var $forms = $('form:not(.upload-background)');
			var $uploadBackground = $('.upload-background');

			$forms.submit(function(event) {
				event.preventDefault();
				var url = $(this).prop('action');
				$.post(url, $(this).serialize(), function(data) {
                    formData = data;
					console.log(data);
				});
			});

			var $testConverter = $('.test-converter');
			var $testGrades = $('.test-grades');

			$testConverter.click(function() {
				$testGrades.html('');
				function getGrade(i) {
					if(i < 14) {
						var year = 2017 + i;
						$.post('/user/grad-year-to-grade', { year: year }, function(data) {
							console.log(data);
							$testGrades.append('<li class="list-group-item">Class of ' + year + ' is in grade ' + data.grade + '</li>')
							getGrade(++i);
						});
					}
				}
				getGrade(-4);
			});

			$uploadBackground.submit(function(event) {
				event.preventDefault();
				var url = $(this).prop('action');
				var formData = new FormData(this);
				$.ajax({
					type: 'POST',
					url: url,
					data: formData,
					cache: false,
					contentType: false,
					processData: false,
					success: function(data) {
						console.log(data);
					},
					error: function(data) {
						console.log('There was a problem uploading your background!');
					}
				});
			});
		</script>
	</body>
</html>
