<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Configure your Classes</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    </head>
    <body>
		<h1>Username: <span class="username"></span></h1>
        <form class="form-inline" action="/add-class" method="post">
            <input class="form-control" placeholder="Optional Id" name="id">
            <input class="form-control" placeholder="Class Name" name="name" value="Science">
			
			<select class="form-control" name="teacherPrefix">
				<option value="Mr.">Mr.</option>
				<option value="Ms.">Ms.</option>
			</select>
			
            <input class="form-control" placeholder="Teacher" name="teacherFirstName" value="SeÃ±or">
            <input class="form-control" placeholder="Teacher" name="teacherLastName" value="Satan">
            <input class="form-control" placeholder="Block" name="block" value="a">
            <input class="form-control" placeholder="Color" name="color" value="#123">
            <input class="form-control" placeholder="Type" name="type" value="science">
            <div class="checkbox">
                <label>
                    <input type="checkbox" name="displayPlanner" checked> Display Planner
                </label>
            </div>
            <button class="btn btn-success">Add Class</button>
        </form>
		<ul class="classes"></ul>
        <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
		<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <script>
			var socket = io.connect();
			
			$.post('/get-classes', function(data) {
				data.forEach(function(value, index) {
					$('.classes').append('<li><button class="delete btn btn-danger" data-id="' + value._id + '">Delete</button>' + JSON.stringify(data, null, 4) + '</li>');
				});
				
				$('.delete').click(function() {
					var classId = $(this).prop('data-id');
					console.log(classId);
					$.post('/delete-class', { id: classId }, function(deleteData) {
						console.log(deleteData);
					});
				});
			});
			
			$('form').submit(function() {
				$.post($(this).prop('action'), $(this).serialize(), function(data) {
					console.log(data);
				})
					.fail(function() {
						console.log('There was an error submitting the form. Contact support if this keeps happening!');
					});

				return false;
			});
			
			socket.emit('username');
            socket.on('username', function(username) {
                $('.username').text(username);
            });
        </script>
    </body>
</html>