<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Planner</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
    </head>
    <body>
        <div class="get-planner col-md-6">
            <form class="get-planner-form form-inline">
                <input class="form-control" name="year" placeholder="Year" value="2016">
                <select class="form-control" name="month">
                    <option value="1">January</option>
                    <option value="2">February</option>
                    <option value="3">March</option>
                    <option value="4">April</option>
                    <option value="5" selected>May</option>
                    <option value="6">June</option>
                    <option value="7">July</option>
                    <option value="8">August</option>
                    <option value="9">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>
                <button class="btn btn-info">Get Planner!</button>
            </form>
            <ul class="event-list list-group"></ul>
        </div>
        
        <div class="set-event col-md-6">
            <form class="set-event-form form-inline">
                <input class="form-control" name="id" placeholder="Edit ID">
                <input class="form-control" name="title" placeholder="Event Title">
                <input class="form-control" name="desc" placeholder="Description (Optional)">
                <select class="class-list form-control" name="class-id"></select>
                <input class="form-control" name="link" placeholder="Link (Optional)">
                <h3>Start Date</h3>
                <input class="form-control" name="start-year" placeholder="Year" value="2016">
                <select class="form-control" name="start-month">
                    <option value="1">January</option>
                    <option value="2">Fubruary</option>
                    <option value="3">March</option>
                    <option value="4">April</option>
                    <option value="5">May</option>
                    <option value="6">June</option>
                    <option value="7">July</option>
                    <option value="8">August</option>
                    <option value="9">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>
                <select class="form-control" name="start-day">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24" selected>24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                </select>
                <h3>End Date</h3>
                <input class="form-control" name="end-year" placeholder="Year" value="2016">
                <select class="form-control" name="end-month">
                    <option value="1">January</option>
                    <option value="2">Fubruary</option>
                    <option value="3">March</option>
                    <option value="4">April</option>
                    <option value="5">May</option>
                    <option value="6">June</option>
                    <option value="7">July</option>
                    <option value="8">August</option>
                    <option value="9">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>
                <select class="form-control" name="end-day">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24" selected>24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                </select>
                <button class="btn btn-info">Add Event!</button>
            </form>
        </div>
        
        <script src="http://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js" integrity="sha384-vZ2WRJMwsjRMW/8U7i6PWi6AlO1L79snBrmgiDpgIWJ82z8eA5lenwvxbMV1PAh7" crossorigin="anonymous"></script>
        <script>
            var $getPlannerForm = $('.get-planner-form');
            var $plannerList = $('.planner-list');
            var $classList = $('.class-list');
            var $eventList = $('.event-list');
            var $setEventForm = $('.set-event-form');
            
            $getPlannerForm.submit(function(event) {
                event.preventDefault();
                $.post('/planner/get', $getPlannerForm.serialize(), function(data) {
                    console.log(data);
                    
                    $eventList.html('');
                    data.events.forEach(function(value) {
                        console.log(value);
                        $eventList.append('<li class="list-group-item">ID: ' + value._id + ' Title: '+ value.title + ' Class: ' + JSON.stringify(value.class) + ' <button class="btn btn-danger" onclick="deleteEvent(\'' + value._id + '\')">Delete</button></li>');
                    });
                });
            });
            
            $setEventForm.submit(function(event) {
                event.preventDefault();
                $.post('/planner/add', $setEventForm.serialize(), function(data) {
                    console.log(data);
                });
            });
            
            function deleteEvent(id) {
                $.post('/planner/delete', { id: id }, function(data) {
                    console.log(data);
                });
            }
            
            // Add list of classes for input
            $.post('/classes/get', function(data) {
                console.log(data);
                data.classes.forEach(function(value) {
                    console.log(value);
                    $classList.append('<option value="' + value['_id'] + '">' + value.name + '</option>');
                });
            });
        </script>
    </body>
</html>
